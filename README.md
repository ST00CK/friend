📐 Friend 시스템 아키텍처

이 문서는 Friend 애플리케이션의 고수준 아키텍처와 구성 요소 간의 관계를 설명합니다. 애플리케이션의 다양한 부분이 어떻게 상호 작용하는지와 기술적 관점에서의 구조를 제공합니다. Neo4j 통합에 대한 자세한 내용은 Neo4j Graph Database Integration을 참조하세요.

🧱 개요

Friend 애플리케이션은 계층화된 아키텍처 패턴을 따르며, 다음과 같이 명확하게 분리된 계층으로 구성됩니다:

API 계층: Gin 웹 프레임워크를 사용하여 HTTP 요청과 응답을 처리합니다.

비즈니스 계층: 서비스 컴포넌트를 통해 애플리케이션 로직을 구현합니다.

데이터 액세스 계층: 리포지토리를 통해 데이터베이스 작업을 관리합니다.

이러한 분리는 코드베이스의 유지 관리성, 테스트 용이성 및 유연성을 향상시킵니다.

🧩 아키텍처 계층

API 계층: HTTP 요청과 응답을 처리하며, Gin 웹 프레임워크를 사용합니다.

비즈니스 계층: 애플리케이션의 핵심 로직을 구현하며, 서비스 컴포넌트로 구성됩니다.

데이터 액세스 계층: Neo4j 데이터베이스와의 상호 작용을 관리하며, 리포지토리를 통해 구현됩니다.

🔄 구성 요소 간의 관계

다음 다이어그램은 시스템의 주요 구성 요소와 파일 간의 관계를 보여줍니다:

[main.go]
   |
   v
[controller/userController.go]
   |
   v
[service/userService.go]
   |
   v
[repository/neo4jUserRepository.go]

🔁 요청 처리 흐름

일반적인 요청은 다음과 같은 순서로 시스템을 통해 처리됩니다:

클라이언트: HTTP 요청을 보냅니다.

컨트롤러: 요청을 수신하고 해당 서비스 메서드를 호출합니다.

서비스: 비즈니스 로직을 처리하고 리포지토리 메서드를 호출합니다.

리포지토리: Neo4j 데이터베이스와 상호 작용하여 데이터를 조회하거나 수정합니다.

응답: 처리 결과를 클라이언트에 반환합니다.

🧩 핵심 구성 요소

🏁 메인 애플리케이션 (main.go)

애플리케이션의 진입점으로서 다음과 같은 초기화 작업을 수행합니다:

환경 구성 로드

Neo4j 데이터베이스 연결 설정

CORS 지원을 포함한 Gin 웹 프레임워크 설정

API 라우트 구성

포트 8080에서 HTTP 서버 시작

📂 컨트롤러 (userController.go)

HTTP 요청을 처리하고 이를 서비스 호출로 변환합니다. 주요 엔드포인트는 다음과 같습니다:

POST /user/create: 새 사용자 노드 생성

POST /user/delete: 사용자 노드 삭제

POST /user/edit: 사용자 프로필 업데이트

POST /friendship/create: 사용자 간의 친구 관계 생성

POST /friendship/delete: 친구 관계 제거

GET /friends: 사용자의 친구 목록 조회

🧠 서비스 (userService.go)

컨트롤러와 리포지토리 간의 중개 역할을 하며, 비즈니스 로직을 구현합니다.

🗃️ 리포지토리 (neo4jUserRepository.go)

Neo4j Go 드라이버를 사용하여 데이터베이스 작업을 수행합니다. 주요 기능은 다음과 같습니다:

사용자 노드 관리 (생성, 업데이트, 삭제)

친구 관계 관리 (생성, 삭제)

사용자 관계 조회 (친구 찾기)

🧬 데이터 모델

애플리케이션은 Neo4j의 그래프 데이터 모델을 사용하며, 다음과 같은 구조를 가집니다:

노드 유형

User: 사용자를 나타내며, 다음과 같은 속성을 가집니다:

id: 사용자의 고유 식별자

profile: 사용자 프로필 정보 (문자열로 저장)

관계 유형

FRIEND: 두 사용자 간의 양방향 친구 관계
